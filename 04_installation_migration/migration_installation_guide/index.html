



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for Islandora Enterprise (ISLE)">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.3, mkdocs-material-2.7.0">
    
    
      
        <title>Migration Guide - Islandora Enterprise (ISLE)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.78aab2dc.css">
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#index-of-related-documents" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Islandora Enterprise (ISLE)" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Islandora Enterprise (ISLE)
              </span>
              <span class="md-header-nav__topic">
                Migration Guide
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    Islandora Enterprise (ISLE)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../about/" title="About" class="md-nav__link">
      About
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../glossary/" title="Glossary of Terms and Variables" class="md-nav__link">
      Glossary of Terms and Variables
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../install_start_here/" title="Installation Start Here" class="md-nav__link">
      Installation Start Here
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Installation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Installation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../01_installation_host_server/host_server_system_specifications/" title="Host Server Specifications" class="md-nav__link">
      Host Server Specifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../01_installation_host_server/install_on_centos/" title="Install ISLE Host Server Dependencies on CentOS" class="md-nav__link">
      Install ISLE Host Server Dependencies on CentOS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../01_installation_host_server/install_on_ubuntu/" title="Install ISLE Host Server Dependencies on Ubuntu" class="md-nav__link">
      Install ISLE Host Server Dependencies on Ubuntu
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../01_installation_host_server/install_docker_for_mac/" title="Docker for Mac" class="md-nav__link">
      Docker for Mac
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../01_installation_host_server/install_docker_for_windows/" title="Docker for Windows" class="md-nav__link">
      Docker for Windows
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../01_installation_host_server/install_macos_vagrant/" title="Vagrant & VirtualBox on MacOS" class="md-nav__link">
      Vagrant & VirtualBox on MacOS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Installation - Test (isle.localdomain)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Installation - Test (isle.localdomain)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../02_installation_test/ild_example_user_story/" title="Test Site Example User Story" class="md-nav__link">
      Test Site Example User Story
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../02_installation_test/ild_installation_guide/" title="Test Site Installation Guide" class="md-nav__link">
      Test Site Installation Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../02_installation_test/ild_resources/" title="Test Site Resources" class="md-nav__link">
      Test Site Resources
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Installation - New Site
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Installation - New Site
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../03_installation_new_site/new_site_example_user_story/" title="New Site Example User Story" class="md-nav__link">
      New Site Example User Story
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../03_installation_new_site/new_site_installation_guide_single/" title="New Site Installation Guide - w/ Single ISLE Environment" class="md-nav__link">
      New Site Installation Guide - w/ Single ISLE Environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../03_installation_new_site/new_site_installation_guide_multi/" title="New Site Installation Guide - w/ multiple ISLE Environments" class="md-nav__link">
      New Site Installation Guide - w/ multiple ISLE Environments
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" checked>
    
    <label class="md-nav__link" for="nav-8">
      Installation - Migration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Installation - Migration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../migration_example_user_story/" title="Migration Example User Story" class="md-nav__link">
      Migration Example User Story
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Migration Guide
      </label>
    
    <a href="./" title="Migration Guide" class="md-nav__link md-nav__link--active">
      Migration Guide
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#index-of-related-documents" title="Index of related documents" class="md-nav__link">
    Index of related documents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assumptions-prerequisites" title="Assumptions / Prerequisites" class="md-nav__link">
    Assumptions / Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#detailed-steps" title="Detailed Steps" class="md-nav__link">
    Detailed Steps
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-private-code-repository" title="Create Private Code Repository" class="md-nav__link">
    Create Private Code Repository
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-data-storage-directory" title="Create Data Storage Directory" class="md-nav__link">
    Create Data Storage Directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#migration-export-checklist" title="Migration Export Checklist" class="md-nav__link">
    Migration Export Checklist
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#migration-merge-checklist" title="Migration Merge Checklist" class="md-nav__link">
    Migration Merge Checklist
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-compose-file" title="Docker compose file:" class="md-nav__link">
    Docker compose file:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#final-steps" title="Final steps" class="md-nav__link">
    Final steps
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clone-custom-configuration-to-host-server" title="Clone Custom Configuration to Host Server" class="md-nav__link">
    Clone Custom Configuration to Host Server
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spin-up-isle-containers" title="Spin up ISLE containers!" class="md-nav__link">
    Spin up ISLE containers!
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#review-or-pull-down-isle-docker-images" title="Review or pull down ISLE Docker images" class="md-nav__link">
    Review or pull down ISLE Docker images
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spin-up-the-proxy-container" title="Spin up the proxy container" class="md-nav__link">
    Spin up the proxy container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spin-up-the-mysql-container-and-import-production-databases" title="Spin up the mysql container and import production database(s)" class="md-nav__link">
    Spin up the mysql container and import production database(s)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spin-up-the-fedora-container-and-start-the-reindex-processes" title="Spin up the fedora container and start the reindex processes" class="md-nav__link">
    Spin up the fedora container and start the reindex processes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spin-up-apache-container" title="Spin up apache container" class="md-nav__link">
    Spin up apache container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spin-up-solr-container-and-complete-the-reindex-processes" title="Spin up solr container and complete the reindex processes" class="md-nav__link">
    Spin up solr container and complete the reindex processes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../migration_export_checklist/" title="Migration Export Checklist" class="md-nav__link">
      Migration Export Checklist
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../migration_merge_checklist/" title="Migration Merge Checklist" class="md-nav__link">
      Migration Merge Checklist
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../migration_reindex_process/" title="Migration Reindex Process" class="md-nav__link">
      Migration Reindex Process
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Developer Docs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Developer Docs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../05_developer_docs/dev_contributing_to_project/" title="Contributing to Project" class="md-nav__link">
      Contributing to Project
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../05_developer_docs/dev_documentation_overview/" title="Documentation Overview" class="md-nav__link">
      Documentation Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../05_developer_docs/dev_documentation_editing_online/" title="Documentation Editing - Online" class="md-nav__link">
      Documentation Editing - Online
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../05_developer_docs/dev_documentation_editing_local/" title="Documentation Editing - Local" class="md-nav__link">
      Documentation Editing - Local
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../05_developer_docs/dev_documentation_mkdocs/" title="Installing Mkdocs" class="md-nav__link">
      Installing Mkdocs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../05_developer_docs/dev_about_maintainers/" title="About Maintainers" class="md-nav__link">
      About Maintainers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../05_developer_docs/dev_about_project/" title="About Project" class="md-nav__link">
      About Project
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../05_developer_docs/dev_release_process/" title="Release process" class="md-nav__link">
      Release process
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../05_developer_docs/dev_example_user_story/" title="Example User Story" class="md-nav__link">
      Example User Story
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../05_developer_docs/dev_policies/" title="Policies" class="md-nav__link">
      Policies
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../05_developer_docs/dev_build_guide/" title="Build Guide" class="md-nav__link">
      Build Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../05_developer_docs/dev_testing_guide/" title="Testing Guide" class="md-nav__link">
      Testing Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../05_developer_docs/dev_ansible_guide/" title="Ansible Guide" class="md-nav__link">
      Ansible Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Specifications
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Specifications
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../06_specifications/specs_dockerfiles/" title="Dockerfiles" class="md-nav__link">
      Dockerfiles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../06_specifications/specs_docker_containers_images/" title="Docker Containers & Images" class="md-nav__link">
      Docker Containers & Images
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../06_specifications/specs_diagram_network/" title="Diagram of network and connections" class="md-nav__link">
      Diagram of network and connections
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../06_specifications/specs_supported_software_matrix/" title="Supported ISLE Software Matrix" class="md-nav__link">
      Supported ISLE Software Matrix
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../06_specifications/specs_supported_drupal_modules_matrix/" title="Supported Drupal Modules on Test Site Matrix" class="md-nav__link">
      Supported Drupal Modules on Test Site Matrix
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#index-of-related-documents" title="Index of related documents" class="md-nav__link">
    Index of related documents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assumptions-prerequisites" title="Assumptions / Prerequisites" class="md-nav__link">
    Assumptions / Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#detailed-steps" title="Detailed Steps" class="md-nav__link">
    Detailed Steps
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-private-code-repository" title="Create Private Code Repository" class="md-nav__link">
    Create Private Code Repository
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-data-storage-directory" title="Create Data Storage Directory" class="md-nav__link">
    Create Data Storage Directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#migration-export-checklist" title="Migration Export Checklist" class="md-nav__link">
    Migration Export Checklist
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#migration-merge-checklist" title="Migration Merge Checklist" class="md-nav__link">
    Migration Merge Checklist
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-compose-file" title="Docker compose file:" class="md-nav__link">
    Docker compose file:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#final-steps" title="Final steps" class="md-nav__link">
    Final steps
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clone-custom-configuration-to-host-server" title="Clone Custom Configuration to Host Server" class="md-nav__link">
    Clone Custom Configuration to Host Server
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spin-up-isle-containers" title="Spin up ISLE containers!" class="md-nav__link">
    Spin up ISLE containers!
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#review-or-pull-down-isle-docker-images" title="Review or pull down ISLE Docker images" class="md-nav__link">
    Review or pull down ISLE Docker images
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spin-up-the-proxy-container" title="Spin up the proxy container" class="md-nav__link">
    Spin up the proxy container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spin-up-the-mysql-container-and-import-production-databases" title="Spin up the mysql container and import production database(s)" class="md-nav__link">
    Spin up the mysql container and import production database(s)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spin-up-the-fedora-container-and-start-the-reindex-processes" title="Spin up the fedora container and start the reindex processes" class="md-nav__link">
    Spin up the fedora container and start the reindex processes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spin-up-apache-container" title="Spin up apache container" class="md-nav__link">
    Spin up apache container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spin-up-solr-container-and-complete-the-reindex-processes" title="Spin up solr container and complete the reindex processes" class="md-nav__link">
    Spin up solr container and complete the reindex processes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Migration Guide</h1>
                
                <p>This Migration guide will help you migrate your existing production Islandora environment to utilize an ISLE environment for easily maintaining Islandora. This guide will walk you through how to identify and copy your institution's Islandora data and files (including your data volume, Drupal site or sites, and commonly customized xml and xslt files) to your ISLE framework.</p>
<p><strong>Please note:</strong> There is a <a href="../../glossary/">Glossary</a> with relevant terms to help guide installation.</p>
<h2 id="index-of-related-documents">Index of related documents</h2>
<ul>
<li><a href="../migration_example_user_story/">Migration Example User Story</a></li>
<li><a href="../migration_export_checklist/">Migration Export Checklist</a></li>
<li><a href="../migration_merge_checklist/">Migration Merge Checklist</a></li>
<li><a href="../migration_reindex_process/">Migration Reindex Process</a></li>
</ul>
<hr />
<h2 id="assumptions-prerequisites">Assumptions / Prerequisites</h2>
<ul>
<li>
<p>Comfortability with ISLE. Recommend first setting up the ISLE Test Site (<code>isle.localdomain</code>) via the <a href="../../install_start_here/">Install Start Here</a> guide. If you have already done this, please proceed.</p>
</li>
<li>
<p>Host Server that conforms to the specifications outlined in the <a href="../../../01_installation_host_server/host_server_system_specifications/">Host Server Specifications</a></p>
</li>
<li>
<p>This Migration guide is designed for a Host server that has already followed the appropriate setup and configuration instructions in the <code>Migrate to ISLE</code> section of the <a href="../../install_start_here/">Install Start Here</a> guide.</p>
</li>
<li>
<p>Instructions below also assume a MacOS or Linux laptop or workstation to be used in conjunction with the ISLE Host Server for deploying configs, code, files etc. Windows users may have to adjust / swap out various tools as needed.</p>
</li>
<li>
<p>These directions also depend on the type of local computer used to connect via browser to Islandora.</p>
</li>
<li>
<p>Have an existing domain name that works - is set up with DNS etc...</p>
</li>
<li>
<p>Have <a href="../../glossary/#systems">SSL Certificates</a> previously created for the web domain. (<em>Please work with the appropriate internal IT resource to provision these files for your domain</em>)</p>
</li>
<li>
<p>ISLE project has been cloned to BOTH your local laptop/workstation AND the ISLE host server</p>
</li>
<li>
<p>Disk space on or mounted to the Host Server large enough to store a <strong>copy</strong> of your fedora data store</p>
</li>
<li>
<p>Access to that server from your local workstation via SSH (<code>islandora</code> user with sudo privileges)</p>
</li>
<li>
<p>Access to the current Islandora production server</p>
</li>
<li>
<p>Usernames/Passwords for key parts of your stack which are used <strong>for</strong> the migration.</p>
<ul>
<li>Drupal SQL information: username, password, database name can be obtained from your original <code>www/sites/default/settings.php</code></li>
<li>Fedora SQL information: username, password, database name can be obtained from your original <code>fedora/server/config/fedora.fcfcg</code></li>
<li>Fedora users: please have a copy of your <code>fedora-users.xml</code></li>
<li>Tomcat users: please have a copy of your <code>tomcat-users.xml</code> but plan on generating new values for these logins for both the fedora and solr containers.</li>
</ul>
</li>
<li>
<p>SQL dump (export) of the current production site's Drupal database. Ensure that the contents of any <code>cache</code> table are not exported.</p>
</li>
</ul>
<p><strong>Finally also please note:</strong> Instructions from this guide  and it's associated checklists may call for you to <strong>COPY</strong> data from your running Islandora environment to a newly created folder: <code>current_prod_islandora_config</code> located on your ISLE Host Server or local workstation called <code>Local ISLE config laptop</code>. You will then work from this copy for future steps. In some cases, you'll need to copy configurations down to your laptop / workstation (<code>Local ISLE config laptop</code>) and merge contents as directed. (<em>if necessary</em>) In other cases, due to the size of the data e.g. Fedora data you may only be able to copy production data to the target ISLE Host server (<code>Remote ISLE Host server</code>) instead of your local laptop. Please attempt to balance as necessary when putting together the <code>docker-compose.yml</code> and config directory. Most instructions will attempt to direct you to copy to a local workstation. ultimately you will be putting this config in a git repository to deploy to the remote ISLE host server for everything to work with both your copied data and merged production settings.</p>
<p><strong>Recommend:</strong> Having adequate storage space available for the ISLE host server to accommodate a working copy of a production Islandora's associated configurations and data.</p>
<hr />
<h2 id="overview">Overview</h2>
<p><strong>TL;DR</strong> Copy old stuff over to host server and local laptop w/ checklist, create new private repo for configs, merge old configs into new configs w/ checklist, edit docker-compose.yml to point to new configs, spin up containers, go into fedora container &amp; reindex, qc site - Done.</p>
<ul>
<li>
<p>Create a new directory on your remote ISLE Host server for the /data folders and files</p>
</li>
<li>
<p><strong>COPY</strong> the drupal/islandora site and configuration files from the running production Islandora</p>
<ul>
<li>(following the <a href="../migration_export_checklist/">Migration Export Checklist</a>).</li>
</ul>
</li>
<li>
<p>Create a new directory on your local laptop for the /config folders and files, copy the ISLE repository /config into it, and make this into a private repository.</p>
</li>
<li>
<p>Edit the /config files so they have the proper site-specific information</p>
<ul>
<li>(following the <a href="../migration_merge_checklist/">Migration Merge Checklist</a></li>
</ul>
</li>
<li>
<p><strong>NOTE</strong> Some of this will involve fairly complicated merging of files to account for custom edits that may have been made to your production Islandora site and/or to bring configuration files up to work with newer software versions. This is by far the trickiest part of the migration and definitely a good place to seek help from the community if you get stuck.</p>
</li>
<li>
<p>Edit the docker-compose.yml file to point to all these fine new config files.</p>
</li>
<li>Download ISLE images from Dockerhub and spin up the ISLE Containers (takes a while depending on network speeds)</li>
<li>Go into the fedora container and do a re-indexing (takes a little while)<ul>
<li>(following the <a href="../migration_reindex_process/">Migration Reindex Process</a>).</li>
</ul>
</li>
<li>Go to the new site and QC!</li>
</ul>
<hr />
<h2 id="detailed-steps">Detailed Steps</h2>
<ul>
<li>
<p>Setup a Private Code Repository</p>
<ul>
<li>Most of the work in this guide involves careful editing of the various configuration and settings files that customize the pieces of Islandora (database, repository, web-server, etc...).</li>
<li>Doing this work in a code repository makes it easier to correct errors and to repeat the process for additional servers without needing to replicate all the work.</li>
<li>Since the edits will include things like passwords, it's important to make this a private repository.</li>
</ul>
</li>
<li>
<p>Customizing for your Environment</p>
<ul>
<li>Many of the steps below describe adding the domain name or other specific bits of information into files or appending those bits to file names.</li>
<li>In these cases this guide will call out the customization point AND provide an example - it's important not to literally copy paste the example!</li>
<li>Your best guide for these customizations are the source files from your currently running Islandora environment.</li>
</ul>
</li>
</ul>
<h3 id="create-private-code-repository">Create Private Code Repository</h3>
<p><strong>ON your local laptop/workstation:</strong></p>
<ul>
<li>
<p>On the repository of your choice (GitHub, GitLab, Bitbucket, etc.) create a PRIVATE remote git repo - see the specific code repository documentation online for setup instructions.</p>
</li>
<li>
<p>Open a terminal - navigate to <code>/opt/ISLE</code> or where you cloned the ISLE directory on your local workstation.</p>
</li>
<li>
<p>Create a directory named <code>yourdomain-config</code> (where "yourdomain" is your server domain name)</p>
<ul>
<li>Example:  <code>digital-collections.yourdomain.com-config</code></li>
</ul>
</li>
<li>
<p>Within the ISLE directory, locate the directory called <code>config/isle-newsite-sample</code> and copy all the contents to the newly created directory</p>
</li>
<li>
<p><code>cd</code> into the newly copied and renamed <code>yourdomain-config</code> directory and type:</p>
<ul>
<li><code>git init</code></li>
<li><em>Initiates this directory as a code repository.</em></li>
</ul>
</li>
<li>
<p>Type: <code>git remote add NameOfYourRepository URLofYourRepository</code></p>
<ul>
<li>Connects your local repository to the remote you set up in the above steps.</li>
<li><strong>NOTE:</strong> replace "NameOfYourRepository" and "URLofYourRepository" with the name of your repository and its URL</li>
</ul>
</li>
<li>
<p>You are now ready to perform the customization edits in this directory (you can use a text editor of choice now don't have to stay in terminal - just locate the folder in the finder and open file in text editor)</p>
</li>
</ul>
<h3 id="create-data-storage-directory">Create Data Storage Directory</h3>
<p>This area will be where all current Islandora production data is to be stored. This includes the Apache <code>/var/www/html</code> directory and the appropriate Fedora <code>/usr/local/fedora/data</code> subdirectories outlined below.</p>
<p><strong>ON your remote ISLE Host server:</strong></p>
<ul>
<li>
<p>Create a directory named <code>yourdomain-data</code> (where "yourdomain" is your server domain name)</p>
<ul>
<li>Example:  <code>digital-collections.yourdomain.com-data</code></li>
</ul>
</li>
<li>
<p>Ensure that the islandora user has ownership and permissions to access this data.</p>
<ul>
<li>
<p><code>chown -Rv islandora:islandora ~/digital-collections.yourdomain.com-data</code></p>
</li>
<li>
<p>Please note this path may change depending on how your ISLE host server storage area is setup.</p>
</li>
</ul>
</li>
</ul>
<hr />
<h3 id="migration-export-checklist">Migration Export Checklist</h3>
<ul>
<li>
<p>In the <code>/opt/ISLE/config</code> directory create a new sub-directory (you can call this <code>current_prod_islandora_config</code>)</p>
</li>
<li>
<p>Copy the files from your current running institutional Islandora Production server(s) into this directory following the <a href="../migration_export_checklist/">Migration Export Checklist</a> of materials on either the local workstation or remote server (in case the data involved is too large for your local workstation) as directed.</p>
<ul>
<li><strong>Noting</strong> that most likely the Apache data (<code>/var/www/html</code>) &amp; Fedora data (<code>/usr/local/fedora/data</code>) will stay on your designated remote ISLE host server storage area not your local laptop used for creating the ISLE config.</li>
</ul>
</li>
<li>
<p>These copied files will be the source for edits and merges - just to be very clear, please <strong>don't work directly on these files in your currently running production Islandora system!</strong></p>
</li>
<li>
<p>To be even more clear, after following the checklist, you should now have two nearly identical <code>/config</code> subdirectories</p>
<ul>
<li><strong>A.</strong> copied from the cloned ISLE repository and renamed with your domain e.g. <code>yourdomain-config or digital-collections.yourdomain.com-config</code></li>
<li><strong>B.</strong> copied from your currently running Islandora environment. e.g. <code>current_prod_islandora_config</code></li>
</ul>
</li>
</ul>
<h3 id="migration-merge-checklist">Migration Merge Checklist</h3>
<p>The <strong>goal</strong> is to merge all site-specific data (domain names, variables, usernames, passwords, etc..) AND all site-specific customizations or settings from the files in directory B. into the matching files in directory A.</p>
<ul>
<li>
<p>Compare the data and settings of the files found within directory <strong>B.</strong> <code>current_prod_islandora_config</code>, and then merge, edit or copy as necessary with the templated settings found within the renamed directory <strong>A.</strong> <code>yourdomain-config</code> as guided in the <a href="../migration_merge_checklist/">Migration Merge Checklist</a>.</p>
</li>
<li>
<p>Customizations: (<em>optional</em>) Carefully compare the following most frequently customized files with the new, default versions found within your new ISLE config folder. Use a "Diff" tool (example: <a href="https://www.scootersoftware.com/download.php">Beyond Compare</a> to merge any desired customizations from your production Islandora files to persist within the new ISLE config folder of files:</p>
</li>
<li>
<p>Compare and merge the Solr files: <code>schema.xml</code></p>
</li>
<li>Compare and merge the Solr files: <code>solrconfig.xml</code></li>
<li>Compare and merge the Solr files: <code>stopwords</code></li>
<li>Compare and merge the Fedora GSearch Islandora Transform (XSLTs) folder of files: <code>islandora_transforms</code></li>
</ul>
<h3 id="docker-compose-file">Docker compose file:</h3>
<ul>
<li>
<p>Edit the file: <strong>docker-compose.yml</strong> accordingly:</p>
<ul>
<li>Change container names (you could do this based on the environment (e.g. prod)</li>
</ul>
</li>
<li>
<p>For example if you are building a prod server instance:</p>
<p><code>container_name: isle-solr-newsite</code></p>
<p>changes to:</p>
<p><code>container_name: isle-solr-prod</code></p>
<p>and so on...</p>
</li>
</ul>
<p><strong>Please note:</strong> Much of the file is already with comments guiding the enduser to key areas or files to edit or modify accordingly.</p>
<hr />
<h2 id="final-steps">Final steps</h2>
<ul>
<li>
<p>Now that all the changes are made (be sure to save), ISLE should be ready to test. First you'll need to push these changes to your private code repository.</p>
<ul>
<li>
<p>Open a terminal - <code>cd</code> to the config directory you've been making the changes in...</p>
</li>
<li>
<p><code>git status</code>  this will show you all the files that have been modified and ready to be added to your private repo along with handy paths for the next steps.</p>
</li>
<li>
<p><code>git add /pathtoyourmodifiedfile</code> (replace "pathtoyourmodifiedfile" with the path to your config directory)</p>
</li>
<li>
<p>run these:</p>
</li>
</ul>
<p><code>git add apache</code>
<code>git add fedora</code>
<code>git add mysql</code>
<code>git add proxy</code>
<code>git add solr</code>
<code>git add docker-compose.yml</code></p>
<ul>
<li>
<p>run <code>git status</code> again - everything should be in green now as all modified files have been added - if anything's still red use git add and the path to add it</p>
</li>
<li>
<p>then run <code>git commit -m "initial config commit"</code> inside the double quotes is the commit message you can say whatever you want in this message - so for example if this is the config for your dev instance you could say that...</p>
</li>
<li>
<p>run <code>git push origin master</code> this will push all your changes to the repo further changes should be made on branches for different servers or to master branch for this same server</p>
</li>
</ul>
</li>
</ul>
<hr />
<h2 id="clone-custom-configuration-to-host-server">Clone Custom Configuration to Host Server</h2>
<ul>
<li>
<p>Open a terminal - ssh into your host server using the <code>islandora</code> user</p>
</li>
<li>
<p><code>cd</code> to <code>/opt/ISLE/config/</code></p>
</li>
<li>
<p>because your customizations are in a <strong>private</strong> repository, you'll need to add this islandora user's <code>id_rsa.pub</code> key to the repository via the website.</p>
</li>
<li>
<p>This key is found in <code>/home/islandora/.ssh/id_rsa.pub</code></p>
</li>
<li>
<p>One can simply run <code>cat /home/islandora/.ssh/id_rsa.pub</code> and copy the output (ensure no whitespaces or extra returns)</p>
</li>
<li>
<p>Go to the repository web site with a browser and locate your private repository.</p>
<ul>
<li>locate the ssh key entry location (in Bitbucket this is in Settings / Access Keys /</li>
<li><strong>add</strong> an ssh key w/ the label <strong>islandora host server</strong> paste in the key text and click <strong>Add Key</strong></li>
</ul>
</li>
<li>
<p>Back at your terminal command line, run <code>git clone URLpathtoyourremoteprivaterepo.git .</code> (replacing "URLpathtoyourremoteprivaterepo" with the URL to the repository provided by the website)</p>
</li>
<li>
<p><code>cd</code> into the newly cloned directory - this is a good time to check that the ISLE directory contains your <code>yourdomain-config</code> directory and that it reflects all the edits and customizations.</p>
</li>
</ul>
<h2 id="spin-up-isle-containers">Spin up ISLE containers!</h2>
<h3 id="review-or-pull-down-isle-docker-images">Review or pull down ISLE Docker images</h3>
<p><em>Please Note: You may have already done this in setting up the host server manually and / or with Ansible. However it is always a good idea to review and check using the first command below.</em></p>
<ul>
<li>Check if all ISLE images have been downloaded</li>
<li>
<p><code>docker image ls</code></p>
</li>
<li>
<p>If yes, then proceed to Step 7</p>
</li>
<li>
<p>If no, the perform the following:</p>
<ul>
<li><code>docker pull islandoracollabgroup/isle-mysql:latest</code></li>
<li><code>docker pull islandoracollabgroup/isle-fedora:latest</code></li>
<li><code>docker pull islandoracollabgroup/isle-solr:latest</code></li>
<li><code>docker pull islandoracollabgroup/isle-apache:latest</code></li>
<li><code>docker pull islandoracollabgroup/isle-proxy:latest</code></li>
</ul>
</li>
</ul>
<hr />
<h3 id="spin-up-the-proxy-container">Spin up the proxy container</h3>
<ul>
<li><code>cd /opt/ISLE/yourdomain-config</code></li>
<li><code>docker-compose up -d proxy</code></li>
</ul>
<h3 id="spin-up-the-mysql-container-and-import-production-databases">Spin up the mysql container and import production database(s)</h3>
<ul>
<li><code>cd /opt/ISLE/yourdomain-config</code></li>
<li><code>docker-compose up -d mysql</code></li>
</ul>
<p>Two methods for connecting to the MySQL Database (GUI / CLI) pick one.</p>
<ol>
<li>
<p>One may use SQL GUI clients e.g. Sequel Pro, Navicat, PHPMyAdmin etc. and import the production Drupal website database(s)</p>
</li>
<li>
<p>If the above not practical, one may connect to the MySQL container and run the following.</p>
<ul>
<li><code>docker exec -it isle-mysql-institution bash</code> to connect to the container<ul>
<li>swap out <code>institution</code> for the correct container name.</li>
</ul>
</li>
<li>appropriate mysql commands here: consult MySQL documentation - https://dev.mysql.com/doc/refman/5.7/en/</li>
</ul>
</li>
</ol>
<p>2a. (<em>optional</em>) Only follow this if you have <strong>not</strong> first run <code>drush cc all</code> and then exported the MySQL databases or if you have <strong>not</strong> exported the MySQL databases excluding the contents of any table with <code>cache</code> in the name.</p>
<p>The following are STEPS, not literal commands to prepare your db for ISLE (<em>doing this because we've found there are errors using exported db from production because of caches - causes problems - steps below help you remove this problem</em>)</p>
<ul>
<li>import the production databases into the isle-mysql-institution container (<em>with errors being ignored</em>)</li>
<li>truncate all tables that start with <code>cache</code> on the isle-mysql-institution container</li>
<li>export this new database to the <code>mysql</code> directory on the isle host server</li>
<li>delete all tables (<em>not the database itself</em>) on the isle-mysql-institution container</li>
<li>Reimport the new lighter database to the isle-mysql container</li>
</ul>
<hr />
<h3 id="spin-up-the-fedora-container-and-start-the-reindex-processes">Spin up the fedora container and start the reindex processes</h3>
<p>Staying within <code>/opt/ISLE/yourdomain-config</code>
<em> <code>docker-compose up -d fedora</code>
    * <em>optional</em> check if fedora is running properly e.g. <code>http://isle-prod-project.institution:8080/manager/html</code>
</em> <code>docker exec -it isle-fedora-institution bash</code></p>
<ul>
<li>Follow the steps outlined in the <a href="../migration_reindex_process/">Migration Reindex Process Guide</a><ul>
<li>Follow the steps outlined in the Reindex Fedora RI (1 of 3) section</li>
<li>Follow the steps outlined in the Reindex SQL database (2 of 3) section</li>
<li>Pause here before attempting the steps within the Reindex Solr (3 of 3) section.</li>
<li>Move onto the next section in this guide, <code>Spin up apache container</code>.</li>
</ul>
</li>
</ul>
<hr />
<h3 id="spin-up-apache-container">Spin up apache container</h3>
<ul>
<li>
<p>Staying within <code>/opt/ISLE/yourdomain-config</code></p>
</li>
<li>
<p><code>docker-compose up -d apache</code></p>
</li>
<li>
<p><code>docker exec -it isle-apache-institution bash</code></p>
</li>
<li>
<p>Run the vset script</p>
<ul>
<li><code>cd /var/www/html</code></li>
<li><code>./vsets.sh</code>  </li>
</ul>
</li>
<li>
<p>Check if the site is now is running properly by opening a web browser and navigating to your new ISLE domain e.g. <code>https://isle-prod-project.institution</code></p>
</li>
<li>
<p>Please note while you may be able to see objects being displayed, metadata and search results will be empty until you run the last step in the Reindex process.</p>
</li>
</ul>
<hr />
<h3 id="spin-up-solr-container-and-complete-the-reindex-processes">Spin up solr container and complete the reindex processes</h3>
<ul>
<li>Staying within <code>/opt/ISLE/yourdomain-config</code></li>
<li><code>docker-compose up -d solr</code></li>
<li>
<p>(<em>optional</em>) check if solr is running properly e.g. <code>http://isle-prod-project.institution:8777/manager/html</code></p>
</li>
<li>
<p><code>docker exec -it isle-fedora-institution bash</code> <strong>NOTE FEDORA NOT SOLR!</strong></p>
</li>
<li>
<p>Follow the steps outlined in the <a href="../migration_reindex_process/">Migration Reindex Process Guide</a></p>
<ul>
<li>Follow the steps outlined only in the Reindex Solr (3 of 3) section.</li>
<li>(<em>Ensure that Tomcat and Fedora are running.</em>)</li>
</ul>
</li>
<li>
<p>Check the results on the site using Islandora simple search or the appropriate search method.</p>
</li>
</ul>
<p>Congratulations you should have successfully migrated your production Islandora site to ISLE!!</p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../migration_example_user_story/" title="Migration Example User Story" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Migration Example User Story
              </span>
            </div>
          </a>
        
        
          <a href="../migration_export_checklist/" title="Migration Export Checklist" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Migration Export Checklist
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.8eb9be28.js"></script>
      
      <script>app.initialize({version:"0.17.3",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>